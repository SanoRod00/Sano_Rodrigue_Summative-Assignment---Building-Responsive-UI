<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BudgetBuddy | Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
</head>

<body data-initial-view="dashboard">
    <div class="page-noise" aria-hidden="true"></div>
    <div id="appLive" class="sr-only" aria-live="polite"></div>

    <header class="site-topnav">
        <a class="top-brand" href="#home">BudgetBuddy</a>
        <nav class="top-links" aria-label="Main navigation">
            <a class="is-active" href="#home">Home</a>
            <a href="#dashboard">Dashboard</a>
            <a href="#transactions">Transactions</a>
            <a href="#settings">Settings</a>
        </nav>
    </header>

    <main class="page-main">
        <section id="home" class="alu-hero" aria-labelledby="about-title">
            <div class="alu-hero-wrap">
                <article class="alu-hero-copy">
                    <div class="alu-hero-title">
                        <h1 id="about-title" aria-label="Built for ALU students who want smarter money moves.">
                            <span class="typing-text" data-text="Built for ALU students who want smarter money moves."></span>
                        </h1>
                    </div>
                    <div class="alu-hero-details">
                        <p class="alu-lead">
                            BudgetBuddy helps African Leadership University students learn by doing. It turns day-to-day
                            campus spending into simple, clear insights so students can build confident money habits.
                        </p>
                        <p class="alu-sub">Built for ALU learners who want clarity, control, and calm.</p>
                        <div class="alu-hero-actions">
                            <a class="btn btn-primary" href="#dashboard">Open Dashboard</a>
                            <a class="btn btn-secondary" href="#transactions">View Transactions</a>
                        </div>
                    </div>
                </article>
            </div>
        </section>

        <section class="app-section" aria-label="BudgetBuddy workspace">
            <div class="app-window" role="region" aria-label="BudgetBuddy application">
                <div class="app-shell app-shell--single">
                    <div class="workspace">
                        <header class="workspace-header">
                            <div>
                                <h3 id="workspace-title">Dashboard</h3>
                                <p id="workspace-subtitle">Track spending. Stay under budget.</p>
                            </div>
                            <div class="workspace-tools">
                            </div>
                        </header>

                        <section id="dashboard" class="workspace-view" data-view="dashboard" aria-label="Dashboard view">
                            <div class="dashboard-top-actions">
                                <div class="search-pill" id="dashboardPeriod">This month</div>
                                <button class="btn btn-primary" type="button" data-open-modal>Add transaction</button>
                            </div>

                            <div class="dashboard-grid">
                                <article class="panel stat-panel">
                                    <header>
                                        <h4>This Month</h4>
                                    </header>
                                    <div class="stat-row">
                                        <div class="stat-card">
                                            <span>Spent</span>
                                            <strong class="danger" id="spentValue">0 RWF</strong>
                                        </div>
                                        <div class="stat-card">
                                            <span id="remainingLabel">Remaining</span>
                                            <strong class="safe" id="remainingValue">0 RWF</strong>
                                        </div>
                                        <div class="stat-card">
                                            <span>Transactions</span>
                                            <strong id="transactionCountValue">0</strong>
                                        </div>
                                    </div>
                                </article>

                                <article class="panel progress-panel">
                                    <header>
                                        <h4>Budget Progress</h4>
                                        <span>This Month</span>
                                    </header>
                                    <div class="progress-track">
                                        <span class="progress-fill" id="budgetProgressFill"></span>
                                    </div>
                                    <p id="progressRemainingText"><strong>Remaining:</strong> 0 RWF</p>
                                    <div class="status-pill" id="progressStatus">On track</div>
                                </article>

                                <article class="panel spend-panel">
                                    <h4>Where your money goes</h4>
                                    <ul id="spendList"></ul>
                                </article>

                                <article class="panel insights-panel">
                                    <h4>Insights</h4>
                                    <div class="insights-simple">
                                        <p id="insightTopCategory">Top category: None</p>
                                        <p id="insightBiggest">Biggest transaction: None</p>
                                        <p id="insightSearchCount">Matches for current search: 0</p>
                                    </div>
                                </article>
                            </div>
                        </section>

                        <section id="transactions" class="workspace-view" data-view="transactions" aria-label="Transactions view">
                            <div class="transactions-toolbar">
                                <label for="txSearchInput" class="sr-only">Search using regex</label>
                                <input class="toolbar-input" id="txSearchInput" type="text" autocomplete="off"
                                    placeholder="Search description (regex supported)">

                                <label class="case-toggle" for="caseSensitiveToggle">
                                    <input id="caseSensitiveToggle" type="checkbox">
                                    <span>Case-sensitive</span>
                                </label>

                                <label for="categoryFilter" class="sr-only">Filter by category</label>
                                <select class="toolbar-select" id="categoryFilter"></select>

                                <label for="dateRangeFilter" class="sr-only">Filter by period</label>
                                <select class="toolbar-select" id="dateRangeFilter">
                                    <option value="this-month">This Month</option>
                                    <option value="last-30" selected>Last 30 Days</option>
                                    <option value="last-90">Last 90 Days</option>
                                    <option value="all">All Time</option>
                                </select>

                                <label for="sortSelect" class="sr-only">Sort transactions</label>
                                <select class="toolbar-select" id="sortSelect">
                                    <option value="date_desc">Sort: Newest</option>
                                    <option value="date_asc">Sort: Oldest</option>
                                    <option value="amount_desc">Sort: Amount High-Low</option>
                                    <option value="amount_asc">Sort: Amount Low-High</option>
                                    <option value="description_asc">Sort: Description A-Z</option>
                                    <option value="description_desc">Sort: Description Z-A</option>
                                </select>

                                <button class="btn btn-primary" type="button" data-open-modal>Add Transaction</button>
                            </div>

                            <p class="error-text" id="regexError" hidden>Invalid regex pattern.</p>
                            <p class="results-line" id="resultsLine">Showing 0 transactions.</p>

                            <div class="table-wrap" role="region" aria-label="Transactions table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Description</th>
                                            <th>Category</th>
                                            <th>Amount</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="transactionsTbody"></tbody>
                                </table>
                            </div>

                            <div class="pagination" id="pagination" aria-label="Pagination"></div>
                        </section>

                        <section id="settings" class="workspace-view" data-view="settings" aria-label="Settings view">
                            <div class="settings-grid">
                                <article class="panel settings-card">
                                    <h4>Budget Controls</h4>
                                    <div class="form-row">
                                        <label for="budgetCap">Monthly Budget Cap (RWF)</label>
                                        <input id="budgetCap" type="number" min="1" step="100" inputmode="numeric">
                                    </div>
                                    <p class="muted">Set your spending limit for the month.</p>
                                    <hr>
                                    <p id="budgetRemainingLine">Remaining this month: <strong>0 RWF</strong></p>
                                    <p class="danger" id="budgetOverLine">Over budget by 0 RWF</p>
                                </article>

                                <article class="panel settings-card">
                                    <h4>Currency Preferences</h4>
                                    <div class="form-row two-col">
                                        <label for="baseCurrencySelect">Base Currency</label>
                                        <select class="toolbar-select" id="baseCurrencySelect">
                                            <option value="RWF">RWF</option>
                                            <option value="USD">USD</option>
                                            <option value="EUR">EUR</option>
                                        </select>
                                    </div>
                                    <div class="form-row two-col">
                                        <label for="usdRateInput">USD to RWF</label>
                                        <input id="usdRateInput" type="number" min="1" step="1" inputmode="numeric">
                                    </div>
                                    <div class="form-row two-col">
                                        <label for="eurRateInput">EUR to RWF</label>
                                        <input id="eurRateInput" type="number" min="1" step="1" inputmode="numeric">
                                    </div>
                                    <label class="case-toggle" for="settingsCaseSensitive">
                                        <input id="settingsCaseSensitive" type="checkbox">
                                        <span>Regex search is case-sensitive</span>
                                    </label>
                                </article>

                                <article class="panel settings-card">
                                    <h4>Data Management</h4>
                                    <div class="settings-actions">
                                        <button class="edit-btn" type="button" id="importBtn">Import Data (JSON)</button>
                                        <button class="edit-btn" type="button" id="exportBtn">Export Data (JSON)</button>
                                    </div>
                                    <input id="importFileInput" type="file" accept="application/json" hidden>
                                </article>

                                <article class="panel settings-card danger-zone">
                                    <h4>Danger Zone</h4>
                                    <button class="danger-outline" type="button" id="resetDataBtn">Reset Data</button>
                                    <p class="danger">This action cannot be undone.</p>
                                </article>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="modal-backdrop" id="addModal" hidden>
        <section class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <header class="modal-header">
                <div>
                    <h2 id="modal-title">Add Transaction</h2>
                    <p class="modal-subtitle">Keep your spending record clear, quick, and campus-friendly.</p>
                </div>
                <button class="close-modal" type="button" data-close-modal aria-label="Exit form">&times;</button>
            </header>

            <form id="transactionForm">
                <div class="modal-body">
                    <input type="hidden" id="editTransactionId">

                    <article class="modal-field modal-field-wide">
                        <label for="descriptionInput">Description</label>
                        <input id="descriptionInput" name="description" type="text" maxlength="60" autocomplete="off"
                            placeholder="Enter description">
                        <p class="field-error" id="descriptionError" hidden></p>
                        <p class="muted" id="descriptionHint"></p>
                    </article>

                    <article class="modal-field">
                        <label for="amountInput">Amount (RWF)</label>
                        <input id="amountInput" name="amount" type="number" min="0" step="0.01" inputmode="decimal"
                            placeholder="Amount">
                        <p class="field-error" id="amountError" hidden></p>
                    </article>

                    <article class="modal-field">
                        <label for="categoryInput">Category</label>
                        <select id="categoryInput" name="category"></select>
                        <p class="field-error" id="categoryError" hidden></p>
                    </article>

                    <article class="modal-field">
                        <label for="dateInput">Date</label>
                        <input id="dateInput" name="date" type="date">
                        <p class="field-error" id="dateError" hidden></p>
                    </article>

                    <article class="modal-field modal-field-wide receipt-zone">
                        <input type="file" id="receiptInput" accept="image/*,.pdf" hidden>
                        <button class="upload-receipt" type="button" id="receiptTrigger">Upload Receipt</button>
                        <p class="muted" id="receiptName">No file selected</p>
                    </article>
                </div>

                <footer class="modal-footer">
                    <button class="btn btn-primary" id="saveTransactionBtn" type="submit">Add Transaction</button>
                    <button class="btn btn-danger" id="deleteTransactionBtn" type="button">Delete Transaction</button>
                    <button class="btn btn-navy" type="button" data-close-modal>Exit Form</button>
                </footer>
            </form>
        </section>
    </div>

    <footer class="site-footer">Â© 2026 BudgetBuddy. All rights reserved.</footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var target = document.querySelector(".typing-text");
            if (!target) {
                return;
            }
            var text = target.dataset.text || "";
            var reduceMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
            if (reduceMotion) {
                target.textContent = text;
                return;
            }
            var i = 0;
            function typeNext() {
                target.textContent = text.slice(0, i);
                i += 1;
                if (i <= text.length) {
                    window.setTimeout(typeNext, 45);
                }
            }
            typeNext();
        });
    </script>
    <script src="scripts/storage.js"></script>
    <script src="scripts/state.js"></script>
    <script src="scripts/validators.js"></script>
    <script src="scripts/search.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/main.js"></script>
</body>

</html>
